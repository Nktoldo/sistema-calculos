(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{2322:(e,o,r)=>{"use strict";r.r(o),r.d(o,{default:()=>g});var a=r(5155),s=r(2115),t=r(2619),l=r.n(t),n=r(63),c=r(5029),i=r(3714);function d(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=e.replace(/[^0-9.,-]/g,"").replace(",","."),a=r.split(".");return a.length>1&&(r=a[0]+"."+a[1].slice(0,o)),r}function u(e){if(!e||""===e||"0"===e)return"0.00";let o=parseFloat(e);return isNaN(o)?"0.00":o.toFixed(2)}function m(e,o,r){return"Importado"===r?e*o/100:0}function p(e){var o,r;let a=m(e.custoProduto,e.difalPerc,e.origem),s=(o=e.custoProduto,r=e.frete,o+r+e.boleto+a),t=1-(e.comissaoPerc+e.impostosPerc+20)/100,l=0!==t?s/t:0,n=l-e.custoProduto-e.frete-e.boleto-a-l*e.comissaoPerc/100-l*e.impostosPerc/100,c=1-(e.comissaoPerc+e.impostosPerc+30)/100,i=0!==c?s/c:0;return{lucro20:n,lucro30:i-e.custoProduto-e.frete-e.boleto-a-i*e.comissaoPerc/100-i*e.impostosPerc/100}}function x(e,o){let r;switch(e){case"lucroDesejado":case"difalPerc":case"comissaoPerc":case"impostosPerc":r=function(e){var o,r;let a=m(e.custoProduto,e.difalPerc,e.origem),s=(o=e.custoProduto,r=e.frete,o+r+e.boleto+a);if(s<=0)return{...e,precoVenda:0,difalReais:0,comissaoReais:0,impostosReais:0,lucroLiquido:0,lucroAbsoluto:0,markup:0};let t=1-(e.comissaoPerc+e.impostosPerc+e.lucroDesejado)/100;if(t<=0||t>1)return{...e,precoVenda:0,difalReais:a,comissaoReais:0,impostosReais:0,lucroLiquido:0,lucroAbsoluto:0,markup:0};let l=s/t,n=l*e.comissaoPerc/100,c=l*e.impostosPerc/100,i=l-e.custoProduto-e.frete-e.boleto-a-n-c;return{...e,precoVenda:l,difalReais:a,comissaoReais:n,impostosReais:c,lucroLiquido:i,lucroAbsoluto:l-s,markup:0!==s?l/s*100:0}}(o);break;case"precoVenda":r=function(e){var o,r;let a=m(e.custoProduto,e.difalPerc,e.origem),s=(o=e.custoProduto,r=e.frete,o+r+e.boleto+a),t=e.precoVenda*e.comissaoPerc/100,l=e.precoVenda*e.impostosPerc/100,n=e.precoVenda-e.custoProduto-e.frete-e.boleto-a-t-l,c=e.precoVenda-s,i=0!==s?e.precoVenda/s*100:0,d=0!==e.precoVenda?n/e.precoVenda*100:0;return{...e,difalReais:a,comissaoReais:t,impostosReais:l,lucroLiquido:n,lucroAbsoluto:c,markup:i,lucroDesejado:d}}(o);break;case"lucroLiquido":r=function(e){var o,r;let a=m(e.custoProduto,e.difalPerc,e.origem),s=(o=e.custoProduto,r=e.frete,o+r+e.boleto+a),t=1-(e.comissaoPerc+e.impostosPerc)/100,l=0!==t?(e.lucroLiquido+s)/t:0,n=l*e.comissaoPerc/100,c=l*e.impostosPerc/100,i=0!==l?e.lucroLiquido/l*100:0;return{...e,precoVenda:l,difalReais:a,comissaoReais:n,impostosReais:c,lucroAbsoluto:l-s,markup:0!==s?l/s*100:0,lucroDesejado:i}}(o);break;case"lucroAbsoluto":r=function(e){var o,r;let a=m(e.custoProduto,e.difalPerc,e.origem),s=(o=e.custoProduto,r=e.frete,o+r+e.boleto+a),t=e.lucroAbsoluto+s,l=t*e.comissaoPerc/100,n=t*e.impostosPerc/100,c=t-e.custoProduto-e.frete-e.boleto-a-l-n;return{...e,precoVenda:t,difalReais:a,comissaoReais:l,impostosReais:n,lucroLiquido:c,markup:0!==s?t/s*100:0,lucroDesejado:0!==t?c/t*100:0}}(o);break;case"markup":r=function(e){var o,r;let a=m(e.custoProduto,e.difalPerc,e.origem),s=(o=e.custoProduto,r=e.frete,o+r+e.boleto+a),t=e.markup*s/100,l=t*e.comissaoPerc/100,n=t*e.impostosPerc/100,c=t-e.custoProduto-e.frete-e.boleto-a-l-n;return{...e,precoVenda:t,difalReais:a,comissaoReais:l,impostosReais:n,lucroLiquido:c,lucroAbsoluto:t-s,lucroDesejado:0!==t?c/t*100:0}}(o);break;default:r=o}let a=p(r);return r.lucro20=a.lucro20,r.lucro30=a.lucro30,r}function b(){let e=(0,n.useSearchParams)(),o=e.get("id"),t="true"===e.get("edit")||!!o,[m,b]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),{user:h,loading:v,userRole:y,empresa:j}=(0,i.A)(),N=(0,n.useRouter)(),P=()=>{let e=new Date,o=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(o,"-").concat(r,"-").concat(a)};(0,s.useEffect)(()=>{v||h||N.push("/login")},[h,v,N]),(0,s.useEffect)(()=>{h&&j&&console.log("Logado com empresa:",j)},[h,j]);let[F,w]=(0,s.useState)(P()),[k,S]=(0,s.useState)(""),[C,R]=(0,s.useState)(""),[D,V]=(0,s.useState)(""),[E,L]=(0,s.useState)("CIF"),[q,A]=(0,s.useState)(""),[I,O]=(0,s.useState)(""),[B,$]=(0,s.useState)(""),[M,z]=(0,s.useState)(""),[_,T]=(0,s.useState)(""),[U,J]=(0,s.useState)(""),[Q,Y]=(0,s.useState)(""),[G,H]=(0,s.useState)(null),[K,W]=(0,s.useState)(""),[X,Z]=(0,s.useState)([]),[ee,eo]=(0,s.useState)(null),[er,ea]=(0,s.useState)(""),[es]=(0,s.useState)((null==h?void 0:h.email)||null),[et,el]=(0,s.useState)(null),[en,ec]=(0,s.useState)(null),[ei,ed]=(0,s.useState)("13.00"),[eu,em]=(0,s.useState)("4.50"),[ep,ex]=(0,s.useState)(()=>"servylab"===j?"10.00":"4.00"),[eb,eg]=(0,s.useState)(()=>"servylab"===j?"2.80":"4.50"),[ef,eh]=(0,s.useState)("0"),[ev,ey]=(0,s.useState)("0"),[ej,eN]=(0,s.useState)(!1),[eP,eF]=(0,s.useState)(!1),[ew,ek]=(0,s.useState)("0"),[eS,eC]=(0,s.useState)("0"),[eR,eD]=(0,s.useState)("0"),[eV,eE]=(0,s.useState)("0"),[eL,eq]=(0,s.useState)("0"),[eA,eI]=(0,s.useState)({custoProduto:0,frete:0,origem:"Nacional/RS",boleto:"servylab"===j?2.8:4.5,comissaoPerc:4.5,impostosPerc:"servylab"===j?10:4,difalPerc:13,lucroDesejado:0,precoVenda:0,lucroLiquido:0,lucroAbsoluto:0,markup:0,difalReais:0,comissaoReais:0,impostosReais:0,lucro20:0,lucro30:0,id:null,idFirebase:null,status:null,statusFirebase:G,responsavel:ee,emailResponsavel:es,criadoPor:(null==h?void 0:h.uid)||null});async function eO(e,o){let r=e;return 1===o||null===o?r="aguardando":2===o?r="retornado":3===o&&(r="finalizado"),H(r),r}let eB=(0,s.useRef)(null);if((0,s.useEffect)(()=>{!async function(){if(o&&!g&&y&&j){b(!0);try{let t=await (0,c.Jy)(o,y,j);if(t){var e,r,a,s;w(t.data||P()),S(t.cidade||""),R(t.estado||""),V(t.cliente||""),L(t.tipoFrete||"CIF"),A(t.marca||""),O(t.produto||""),$(t.tipo||""),z(t.quantidade?String(t.quantidade):""),T(t.modelo||""),J(t.status||""),Y(null!=(e=t.id)?e:""),H(null!=(r=t.statusFirebase)?r:"aguardando"),eo(null!=(s=null!=(a=t.responsavel)?a:null==h?void 0:h.email)?s:null),ea(t.observacoes||""),"admin"===y&&t.responsavel&&t.responsavel!==(null==h?void 0:h.uid)&&W(t.responsavel),t.responsavelOriginal&&el(t.responsavelOriginal);let o={custoProduto:t.custoProduto||0,frete:t.frete||0,origem:t.origem||"Nacional/RS",boleto:t.boleto||4.5,comissaoPerc:t.comissaoPerc||4.5,impostosPerc:t.impostosPerc||4,difalPerc:t.difalPerc||13,lucroDesejado:t.lucroDesejado||0,precoVenda:t.precoVenda||0,lucroLiquido:t.lucroLiquido||0,lucroAbsoluto:t.lucroAbsoluto||0,markup:t.markup||0,difalReais:t.difalReais||0,comissaoReais:t.comissaoReais||0,impostosReais:t.impostosReais||0,lucro20:t.lucro20||0,lucro30:t.lucro30||0,id:t.id||null,idFirebase:t.idFirebase||null,status:t.status||null,statusFirebase:t.statusFirebase||"aguardando",responsavel:t.responsavel||null,emailResponsavel:es,criadoPor:t.criadoPor||null};if(o.custoProduto>0&&0===o.lucro20&&0===o.lucro30){let e=p(o);o.lucro20=e.lucro20,o.lucro30=e.lucro30}eI(o),f(!0)}else console.warn("FormData retornou null ou undefined")}catch(e){console.error("Erro ao carregar dados:",e),alert("Erro ao carregar os dados do formul\xe1rio")}finally{b(!1)}}}()},[o,y,j,g,es,null==h?void 0:h.email,null==h?void 0:h.uid]),(0,s.useEffect)(()=>{if(j&&!g){let e="servylab"===j?"10.00":"4.00",o="servylab"===j?"2.80":"4.50";ex(e),eg(o),eI(r=>({...r,impostosPerc:parseFloat(e),boleto:parseFloat(o)}))}},[j,g]),(0,s.useEffect)(()=>{!async function(){if("admin"===y&&j)try{let e=await (0,c.nE)(j);Z(e)}catch(e){console.error("Erro ao carregar funcion\xe1rios:",e)}}()},[y,j]),(0,s.useEffect)(()=>{!async function(){if(et&&j&&!en)try{let{getAllUsuarios:e}=await Promise.resolve().then(r.bind(r,5029)),o=(await e(j)).find(e=>e.uid===et);o&&ec(o.nome)}catch(e){console.error("Erro ao buscar nome do respons\xe1vel original:",e)}}()},[et,j,en]),(0,s.useEffect)(()=>{ed(eA.difalPerc.toFixed(2)),em(eA.comissaoPerc.toFixed(2)),ex(eA.impostosPerc.toFixed(2)),eg(eA.boleto.toFixed(2)),eh(eA.custoProduto?eA.custoProduto.toFixed(2):""),ey(eA.frete?eA.frete.toFixed(2):""),ek(eA.precoVenda.toFixed(2)),eC(eA.lucroDesejado.toFixed(2)),eD(eA.lucroLiquido.toFixed(2)),eE(eA.lucroAbsoluto.toFixed(2)),eq(eA.markup.toFixed(2))},[eA.difalPerc,eA.comissaoPerc,eA.impostosPerc,eA.boleto,eA.custoProduto,eA.frete,eA.precoVenda,eA.lucroDesejado,eA.lucroLiquido,eA.lucroAbsoluto,eA.markup]),v)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-900"})});let e$=e=>{let{name:o,value:r}=e.target;switch(o){case"data":w(r);break;case"cidade":S(r);break;case"estado":R(r);break;case"cliente":V(r);break;case"marca":A(r);break;case"produto":O(r);break;case"tipo":$(r);break;case"quantidade":z(r);break;case"modelo":T(r);break;case"status":J(r);break;case"id":Y(r);break;case"observacoes":ea(r)}},eM=(e,o)=>{let r=parseFloat(o)||0;if(eB.current=e,!(eA.custoProduto>0||eA.frete>0)&&("lucroDesejado"===e||"markup"===e))return void eI({...eA,[e]:r});let a={...eA,[e]:r};eI(x(e,a))},ez=(e,o)=>{let r=parseFloat(o)||0,a={...eA,[e]:r};eI(x(eB.current||"lucroDesejado",a))},e_=e=>{let o={...eA,origem:e};eI(x(eB.current||"lucroDesejado",o))},eT=e=>{L(e)},eU=async e=>{let r,a,s=F&&""!==F.trim()?k&&""!==k.trim()?D&&""!==D.trim()?q&&""!==q.trim()?I&&""!==I.trim()?!M||""===M.trim()||0>=parseFloat(M)?{valido:!1,mensagem:"Por favor, preencha a Quantidade (deve ser maior que 0)."}:_&&""!==_.trim()?0===eA.custoProduto&&0===eA.frete&&0===eA.precoVenda?{valido:!1,mensagem:"Por favor, preencha ao menos o Custo do Produto ou Pre\xe7o de Venda."}:0===eA.precoVenda?{valido:!1,mensagem:"Por favor, defina um dos campos de lucro para calcular o Pre\xe7o de Venda."}:{valido:!0,mensagem:"Formul\xe1rio v\xe1lido!"}:{valido:!1,mensagem:"Por favor, preencha o Modelo do produto."}:{valido:!1,mensagem:"Por favor, preencha o Produto."}:{valido:!1,mensagem:"Por favor, preencha a Marca do produto."}:{valido:!1,mensagem:"Por favor, preencha o Cliente."}:{valido:!1,mensagem:"Por favor, preencha a Cidade."}:{valido:!1,mensagem:"Por favor, preencha a Data."};if(!s.valido)return void alert("⚠️ Valida\xe7\xe3o falhou:\n\n".concat(s.mensagem));let l=await eO(eA.statusFirebase,e);o&&t?(a=eA.criadoPor||(null==h?void 0:h.uid)||"",r="funcionario"===y?eA.responsavel||(null==h?void 0:h.uid)||"":"admin"===y&&K&&""!==K?K:eA.responsavel||(null==h?void 0:h.uid)||""):"funcionario"===y?(r=(null==h?void 0:h.uid)||"",a=(null==h?void 0:h.uid)||""):"admin"===y?(a=(null==h?void 0:h.uid)||"",r=K&&""!==K?K:(null==h?void 0:h.uid)||""):(r=(null==h?void 0:h.uid)||"",a=(null==h?void 0:h.uid)||"");let n={data:F,cidade:k,estado:C,cliente:D,marca:q,produto:I,tipo:B,quantidade:parseFloat(M)||0,modelo:_,origem:eA.origem,custoProduto:eA.custoProduto,frete:eA.frete,tipoFrete:E,boleto:eA.boleto,precoVenda:eA.precoVenda,lucroDesejado:eA.lucroDesejado,lucroLiquido:eA.lucroLiquido,lucroAbsoluto:eA.lucroAbsoluto,markup:eA.markup,difalReais:eA.difalReais,comissaoReais:eA.comissaoReais,impostosReais:eA.impostosReais,lucro20:eA.lucro20,lucro30:eA.lucro30,comissaoPerc:eA.comissaoPerc,impostosPerc:eA.impostosPerc,difalPerc:eA.difalPerc,status:eA.status,statusFirebase:l,id:Q,responsavel:r,criadoPor:a,emailResponsavel:es,observacoes:er,criadoEm:new Date().toISOString()};try{if(b(!0),o&&t){let e={...n,idFirebase:o};await (0,c.wi)(e,y,j),alert("✅ C\xe1lculo atualizado com sucesso!")}else await (0,c.J6)(n,y,j),alert("✅ C\xe1lculo salvo com sucesso!"),window.location.href="/"}catch(e){alert("❌ Erro ao salvar o c\xe1lculo. Por favor, tente novamente."),console.error("Erro ao salvar:",e)}finally{b(!1)}},eJ=async()=>{if(!o)return void alert("Erro: ID do c\xe1lculo n\xe3o encontrado.");if(confirm("⚠️ Tem certeza que deseja excluir este c\xe1lculo?\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita!"))try{b(!0),await (0,c.i6)(o,j),alert("✅ C\xe1lculo exclu\xeddo com sucesso!"),window.location.href="/"}catch(e){alert("❌ Erro ao excluir o c\xe1lculo. Por favor, tente novamente."),console.error("Erro ao excluir:",e)}finally{b(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l(),{href:"/",className:"text-gray-400 hover:text-gray-600",children:"← Voltar"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:o&&t?"Editar C\xe1lculo":"Novo C\xe1lculo"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{confirm("Tem certeza que deseja cancelar? Todas as altera\xe7\xf5es ser\xe3o perdidas.")&&(window.location.href="/")},disabled:m,children:"Cancelar"}),o&&t&&"admin"===y&&(0,a.jsx)("button",{className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:eJ,disabled:m,children:m?"Excluindo...":"Excluir"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-slate-900 text-white rounded-md hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{"admin"!=y?eU(1):"admin"==y&&eA.lucroLiquido>1?eU(2):eU(null)},disabled:m,children:m?"Salvando...":o&&t?"Atualizar":"Salvar"}),"aguardando"==eA.statusFirebase&&"admin"==y&&(0,a.jsx)("button",{className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>eU(2),disabled:m,children:m?"Enviando...":"Enviar para responsavel"}),("retornado"==eA.statusFirebase||"admin"==y)&&(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{"admin"==y&&eA.lucroLiquido>1&&K!=(null==h?void 0:h.uid)?confirm('⚠️ Este calculo possui lucro e responsavel!\n\n Concluindo o calculo, ele aparecera como "concluido" e nao como "retornado" para o responsavel.\n\n Deseja continuar?')&&eU(3):eU(3)},disabled:m,children:m?"Fechando...":"Concluir c\xe1lculo"})]})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[o&&!g&&m&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-900"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando dados do formul\xe1rio..."})]}),!m&&(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:(0,a.jsxs)("form",{className:"space-y-8",children:[(0,a.jsxs)("section",{children:[null!=es&&(0,a.jsxs)("p",{className:"mb-2",children:["Respons\xe1vel: ",es]}),et&&en&&(0,a.jsxs)("p",{className:"mb-2 text-sm text-gray-600 italic",children:["Respons\xe1vel Original: ",en]}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data"}),(0,a.jsx)("input",{type:"date",name:"data",value:F,onChange:e$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),(0,a.jsx)("input",{type:"text",name:"cidade",value:k,onChange:e$,placeholder:"Digite a cidade",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado (UF)"}),(0,a.jsx)("input",{type:"text",name:"estado",value:C,onChange:e$,placeholder:"UF",maxLength:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent uppercase"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),(0,a.jsx)("input",{type:"text",name:"cliente",value:D,onChange:e$,placeholder:"Nome do cliente",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]}),"admin"===y&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atribuir a Funcion\xe1rio"}),(0,a.jsxs)("select",{value:K,onChange:e=>W(e.target.value),className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"-- N\xe3o atribuir (ser\xe1 atribu\xeddo a mim) --"}),X.map(e=>(0,a.jsx)("option",{value:e.uid,children:e.nome},e.uid))]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados do Produto"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),(0,a.jsx)("input",{type:"text",name:"produto",value:I,onChange:e$,placeholder:"Nome do produto",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca"}),(0,a.jsx)("input",{type:"text",name:"marca",value:q,onChange:e$,placeholder:"Marca do produto",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modelo/C\xf3digo"}),(0,a.jsx)("input",{type:"text",name:"modelo",value:_,onChange:e$,placeholder:"Modelo do produto",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),(0,a.jsx)("input",{type:"number",name:"quantidade",value:M,onChange:e$,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origem"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e_("Nacional/RS"),className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("Nacional/RS"===eA.origem?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Nacional/RS"}),(0,a.jsx)("button",{type:"button",onClick:()=>e_("Importado"),className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("Importado"===eA.origem?"bg-red-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Importado"})]})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Custos e Pre\xe7os"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo do Produto"}),(0,a.jsx)("input",{type:"text",value:ej?ef:u(ef),onChange:e=>{let o=d(e.target.value,2);""!==o&&isNaN(parseFloat(o))&&"-"!==o||eh(o)},onFocus:e=>{e.target.select(),eN(!0),eh(eA.custoProduto?eA.custoProduto.toFixed(2):"")},onBlur:()=>{eN(!1),ez("custoProduto",(parseFloat(ef)||0).toString()),eh(eA.custoProduto?eA.custoProduto.toFixed(2):"")},placeholder:"R$ 0,00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frete"}),(0,a.jsx)("input",{type:"text",value:eP?ev:u(ev),onChange:e=>{let o=d(e.target.value,2);""!==o&&isNaN(parseFloat(o))&&"-"!==o||ey(o)},onFocus:e=>{e.target.select(),eF(!0),ey(eA.frete?eA.frete.toFixed(2):"")},onBlur:()=>{eF(!1),ez("frete",(parseFloat(ev)||0).toString()),ey(eA.frete?eA.frete.toFixed(2):"")},placeholder:"R$ 0,00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Frete"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eT("CIF"),className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("CIF"===E?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"CIF"}),(0,a.jsx)("button",{type:"button",onClick:()=>eT("FOB"),className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("FOB"===E?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"FOB"})]})]}),(null!=eA.statusFirebase&&"aguardando"!=eA.statusFirebase||"admin"===y)&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pre\xe7o de Venda ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Unit\xe1rio)"})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:ew,onChange:e=>{if("admin"===y){let o=e.target.value.replace(/[^0-9.,-]/g,"").replace(",",".");""!==o&&isNaN(parseFloat(o))&&"-"!==o||ek(o)}},onFocus:e=>{"admin"===y&&(e.target.select(),ek(eA.precoVenda.toString()))},onBlur:()=>{"admin"===y&&(eM("precoVenda",(parseFloat(ew)||0).toString()),ek(eA.precoVenda.toFixed(2)))},placeholder:"R$ 0,00",readOnly:"admin"!==y,className:"w-full px-3 py-2 border border-blue-400 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50 ".concat("admin"!==y&&"cursor-not-allowed")}),"admin"===y&&eA.precoVenda>0&&(0,a.jsx)("button",{type:"button",onClick:()=>{let e=10*Math.ceil(eA.precoVenda/10);eI(x("precoVenda",{...eA,precoVenda:e}))},className:"px-2 py-1 text-xs text-gray-600 hover:text-slate-900 hover:bg-gray-100 rounded border border-gray-300 transition-colors whitespace-nowrap",title:"Arredondar para cima",children:"⌈↑⌉"})]})]})]})]}),"admin"===y&&(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lucros e Margens"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lucro Desejado (%)"}),(0,a.jsx)("input",{type:"text",value:eS,onChange:e=>{let o=d(e.target.value,2);""!==o&&isNaN(parseFloat(o))&&"-"!==o||eC(o)},onFocus:e=>{e.target.select(),eC(eA.lucroDesejado.toString())},onBlur:()=>{eM("lucroDesejado",(parseFloat(eS)||0).toString()),eC(eA.lucroDesejado.toFixed(2))},placeholder:"%",className:"w-full px-3 py-2 border border-blue-400 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lucro L\xedquido (R$)"}),(0,a.jsx)("input",{type:"text",value:eR,onChange:e=>{let o=d(e.target.value,2);""!==o&&isNaN(parseFloat(o))&&"-"!==o||eD(o)},onFocus:e=>{e.target.select(),eD(eA.lucroLiquido.toString())},onBlur:()=>{eM("lucroLiquido",(parseFloat(eR)||0).toString()),eD(eA.lucroLiquido.toFixed(2))},placeholder:"R$ 0,00",className:"w-full px-3 py-2 border border-blue-400 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lucro Absoluto (R$)"}),(0,a.jsx)("input",{type:"text",value:eV,onChange:e=>{let o=d(e.target.value,2);""!==o&&isNaN(parseFloat(o))&&"-"!==o||eE(o)},onFocus:e=>{e.target.select(),eE(eA.lucroAbsoluto.toString())},onBlur:()=>{eM("lucroAbsoluto",(parseFloat(eV)||0).toString()),eE(eA.lucroAbsoluto.toFixed(2))},placeholder:"R$ 0,00",className:"w-full px-3 py-2 border border-blue-400 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Markup (%)"}),(0,a.jsx)("input",{type:"text",value:eL,onChange:e=>{let o=d(e.target.value,2);""!==o&&isNaN(parseFloat(o))&&"-"!==o||eq(o)},onFocus:e=>{e.target.select(),eq(eA.markup.toString())},onBlur:()=>{eM("markup",(parseFloat(eL)||0).toString()),eq(eA.markup.toFixed(2))},placeholder:"%",className:"w-full px-3 py-2 border border-blue-400 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Lucro com 20% ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Sugest\xe3o)"})]}),(0,a.jsx)("input",{type:"text",value:"R$ ".concat(eA.lucro20.toFixed(2)),readOnly:!0,className:"w-full px-3 py-2 border border-green-300 rounded-md bg-green-50 text-gray-700 cursor-not-allowed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Lucro com 30% ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Sugest\xe3o)"})]}),(0,a.jsx)("input",{type:"text",value:"R$ ".concat(eA.lucro30.toFixed(2)),readOnly:!0,className:"w-full px-3 py-2 border border-green-300 rounded-md bg-green-50 text-gray-700 cursor-not-allowed"})]})]})]}),"admin"===y&&(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Impostos e Despesas"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["DIFAL (R$) ",(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",eA.difalPerc,"%)"]})]}),(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("input",{type:"text",value:"R$ ".concat(eA.difalReais.toFixed(2)),readOnly:!0,className:"w-4/5 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed"}),(0,a.jsx)("input",{type:"text",value:ei,onChange:e=>{let o=e.target.value.replace(/[^0-9.,-]/g,"").replace(",",".");""!==o&&isNaN(parseFloat(o))&&"-"!==o||ed(o)},onFocus:e=>{e.target.select(),ed(eA.difalPerc.toString())},onBlur:()=>{eM("difalPerc",(parseFloat(ei)||0).toString()),ed(eA.difalPerc.toFixed(2))},className:"w-2/6 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Comiss\xe3o (R$) ",(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",eA.comissaoPerc,"%)"]})]}),(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("input",{type:"text",value:"R$ ".concat(eA.comissaoReais.toFixed(2)),readOnly:!0,className:"w-4/5 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed"}),(0,a.jsx)("input",{type:"text",value:eu,onChange:e=>{let o=e.target.value.replace(/[^0-9.,-]/g,"").replace(",",".");""!==o&&isNaN(parseFloat(o))&&"-"!==o||em(o)},onFocus:e=>{e.target.select(),em(eA.comissaoPerc.toString())},onBlur:()=>{eM("comissaoPerc",(parseFloat(eu)||0).toString()),em(eA.comissaoPerc.toFixed(2))},className:"w-2/6 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Impostos (R$) ",(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",eA.impostosPerc,"%)"]})]}),(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("input",{type:"text",value:"R$ ".concat(eA.impostosReais.toFixed(2)),readOnly:!0,className:"w-4/5 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700 cursor-not-allowed"}),(0,a.jsx)("input",{type:"text",value:ep,onChange:e=>{let o=e.target.value.replace(/[^0-9.,-]/g,"").replace(",",".");""!==o&&isNaN(parseFloat(o))&&"-"!==o||ex(o)},onFocus:e=>{e.target.select(),ex(eA.impostosPerc.toString())},onBlur:()=>{eM("impostosPerc",(parseFloat(ep)||0).toString()),ex(eA.impostosPerc.toFixed(2))},className:"w-2/6 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Boleto (R$)"}),(0,a.jsx)("input",{type:"text",value:eb,onChange:e=>{let o=e.target.value.replace(/[^0-9.,-]/g,"").replace(",",".");""!==o&&isNaN(parseFloat(o))&&"-"!==o||eg(o)},onFocus:e=>{e.target.select(),eg(eA.boleto.toString())},onBlur:()=>{ez("boleto",(parseFloat(eb)||0).toString()),eg(eA.boleto.toFixed(2))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es de Controle"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{name:"status",value:U,onChange:e$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[(0,a.jsx)("option",{value:"null",children:"Selecione uma op\xe7\xe3o"}),(0,a.jsx)("option",{value:"enviado",children:"Enviado"}),(0,a.jsx)("option",{value:"fechado",children:"Fechado"}),(0,a.jsx)("option",{value:"lista",children:"Lista"}),(0,a.jsx)("option",{value:"cancelado",children:"Cancelado"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID"}),(0,a.jsx)("input",{type:"text",name:"id",value:Q,onChange:e$,placeholder:"ID do c\xe1lculo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es"}),(0,a.jsx)("textarea",{name:"observacoes",value:er,onChange:e$,placeholder:"Digite observa\xe7\xf5es sobre este c\xe1lculo...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent resize-y"})]})]})]})]})})]})]})}function g(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-900"})}),children:(0,a.jsx)(b,{})})}},4831:(e,o,r)=>{Promise.resolve().then(r.bind(r,2322))}},e=>{e.O(0,[595,965,773,158,742,441,255,358],()=>e(e.s=4831)),_N_E=e.O()}]);