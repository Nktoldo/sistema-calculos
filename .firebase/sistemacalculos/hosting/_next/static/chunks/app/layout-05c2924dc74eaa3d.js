(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1290:()=>{},3563:(e,a,t)=>{Promise.resolve().then(t.bind(t,3714)),Promise.resolve().then(t.t.bind(t,4587,23)),Promise.resolve().then(t.t.bind(t,4705,23)),Promise.resolve().then(t.t.bind(t,1290,23))},3714:(e,a,t)=>{"use strict";t.d(a,{A:()=>b,AuthProvider:()=>m});var o=t(5155),r=t(2115),s=t(2553),n=t(2078),i=t(708);let l=(0,n.Wp)({apiKey:"AIzaSyC3S-aQgsMEDE2hSrUJ1iO_SbviktcFdaU",authDomain:"sistemacalculos.firebaseapp.com",databaseURL:"https://sistemacalculos-default-rtdb.firebaseio.com",projectId:"sistemacalculos",storageBucket:"sistemacalculos.firebasestorage.app",messagingSenderId:"66550952911",appId:"1:66550952911:web:c25e9d5046567935b718ba",measurementId:"G-5VMWSY2ZQM"}),c=(0,s.xI)(l),u=(0,i.C3)(l),d=(0,r.createContext)(void 0);function m(e){let{children:a}=e,[t,n]=(0,r.useState)(null),[l,m]=(0,r.useState)(!0),[b,f]=(0,r.useState)(null),[h,p]=(0,r.useState)(null);async function v(e){try{let a=(await (0,i.Jt)((0,i.KR)(u,"usuarios/logins/".concat(e,"/empresa")))).val();return console.log(a),a}catch(e){return console.error("Erro ao buscar empresa do usu\xe1rio:",e),null}}async function _(e){try{let a=(await (0,i.Jt)((0,i.KR)(u,"usuarios/logins/".concat(e,"/role")))).val();if("admin"===a||"funcionario"===a)return a;return console.warn("Role inv\xe1lido para o usu\xe1rio ".concat(e,": ").concat(a)),"funcionario"}catch(e){return console.error("Erro ao buscar role do usu\xe1rio:",e),"funcionario"}}(0,r.useEffect)(()=>{let e=(0,s.hg)(c,async e=>{if(n(e),e){let a=await _(e.uid);f(a);let t=await v(e.uid);p(t),console.log("Usu\xe1rio autenticado: ".concat(e.email,", Role: ").concat(a,", Empresa: ").concat(t))}else f(null);m(!1)});return()=>e()},[]);let y=async(e,a)=>{await (0,s.x9)(c,e,a)},w=async()=>{await (0,s.CI)(c)};return(0,o.jsx)(d.Provider,{value:{user:t,loading:l,userRole:b,login:y,logout:w,empresa:h},children:a})}function b(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4587:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},4705:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{e.O(0,[321,595,965,773,441,255,358],()=>e(e.s=3563)),_N_E=e.O()}]);