(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{63:(e,a,r)=>{"use strict";var s=r(7260);r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(a,{useSearchParams:function(){return s.useSearchParams}})},3714:(e,a,r)=>{"use strict";r.d(a,{A:()=>f,AuthProvider:()=>m});var s=r(5155),t=r(2115),o=r(2553),n=r(2078),l=r(708);let u=(0,n.Wp)({apiKey:"AIzaSyC3S-aQgsMEDE2hSrUJ1iO_SbviktcFdaU",authDomain:"sistemacalculos.firebaseapp.com",databaseURL:"https://sistemacalculos-default-rtdb.firebaseio.com",projectId:"sistemacalculos",storageBucket:"sistemacalculos.firebasestorage.app",messagingSenderId:"66550952911",appId:"1:66550952911:web:c25e9d5046567935b718ba",measurementId:"G-5VMWSY2ZQM"}),c=(0,o.xI)(u),i=(0,l.C3)(u),d=(0,t.createContext)(void 0);function m(e){let{children:a}=e,[r,n]=(0,t.useState)(null),[u,m]=(0,t.useState)(!0),[f,h]=(0,t.useState)(null),[p,b]=(0,t.useState)(null);async function x(e){try{let a=(await (0,l.Jt)((0,l.KR)(i,"usuarios/logins/".concat(e,"/empresa")))).val();return console.log(a),a}catch(e){return console.error("Erro ao buscar empresa do usu\xe1rio:",e),null}}async function g(e){try{let a=(await (0,l.Jt)((0,l.KR)(i,"usuarios/logins/".concat(e,"/role")))).val();if("admin"===a||"funcionario"===a)return a;return console.warn("Role inv\xe1lido para o usu\xe1rio ".concat(e,": ").concat(a)),"funcionario"}catch(e){return console.error("Erro ao buscar role do usu\xe1rio:",e),"funcionario"}}(0,t.useEffect)(()=>{let e=(0,o.hg)(c,async e=>{if(n(e),e){let a=await g(e.uid);h(a);let r=await x(e.uid);b(r),console.log("Usu\xe1rio autenticado: ".concat(e.email,", Role: ").concat(a,", Empresa: ").concat(r))}else h(null);m(!1)});return()=>e()},[]);let y=async(e,a)=>{await (0,o.x9)(c,e,a)},w=async()=>{await (0,o.CI)(c)};return(0,s.jsx)(d.Provider,{value:{user:r,loading:u,userRole:f,login:y,logout:w,empresa:p},children:a})}function f(){let e=(0,t.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3955:(e,a,r)=>{Promise.resolve().then(r.bind(r,5404))},5404:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>l});var s=r(5155),t=r(2115),o=r(63),n=r(3714);function l(){let[e,a]=(0,t.useState)(""),[r,l]=(0,t.useState)(""),[u,c]=(0,t.useState)(""),[i,d]=(0,t.useState)(!1),{login:m,user:f}=(0,n.A)(),h=(0,o.useRouter)();(0,t.useEffect)(()=>{f&&h.push("/")},[f,h]);let p=async a=>{a.preventDefault(),c(""),d(!0);try{await m(e,r),h.push("/")}catch(e){c(e.message||"Erro ao fazer login")}finally{d(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-center text-3xl font-bold text-gray-900",children:"Sistema de C\xe1lculos"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Fa\xe7a login para continuar"})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p,children:[u&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:e=>a(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-slate-900 focus:border-slate-900",placeholder:"seu@email.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:e=>l(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-slate-900 focus:border-slate-900",placeholder:"••••••••"})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Entrando...":"Entrar"})})]})]})})}}},e=>{e.O(0,[595,965,773,441,255,358],()=>e(e.s=3955)),_N_E=e.O()}]);