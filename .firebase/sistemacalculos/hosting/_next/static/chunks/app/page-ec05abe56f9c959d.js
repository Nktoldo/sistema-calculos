(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4299:(e,t,a)=>{Promise.resolve().then(a.bind(a,7322))},7322:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),r=a(2115),l=a(2619),i=a.n(l),n=a(63),d=a(5029),o=a(3714);function c(){let[e,t]=(0,r.useState)("todos"),[a,l]=(0,r.useState)(""),[c,x]=(0,r.useState)([]),{user:p,loading:m,logout:u,userRole:h,empresa:g}=(0,o.A)(),w=(0,n.useRouter)(),y="v2.0.2";(0,r.useEffect)(()=>{m||p||w.push("/login")},[p,m,w]),(0,r.useEffect)(()=>{p&&h&&g&&((0,d.n7)(h,p.uid,g).then(x),console.log("Vers\xe3o do sistema:",y))},[p,h,g,y]);let f=async()=>{try{await u(),w.push("/login")}catch(e){console.error("Erro ao fazer logout:",e)}};if(m)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-slate-900"})});let b=c.filter(t=>{var s,r,l,i,n,d,o,c;let x="todos"===e||"aguardando"===e&&"aguardando"===t.statusFirebase||"retornado"===e&&"retornado"===t.statusFirebase||"fechado"===e&&"finalizado"===t.statusFirebase,p=a.toLowerCase(),m=!a||(null==(s=t.cliente)?void 0:s.toLowerCase().includes(p))||(null==(r=t.cidade)?void 0:r.toLowerCase().includes(p))||(null==(l=t.marca)?void 0:l.toLowerCase().includes(p))||(null==(i=t.produto)?void 0:i.toLowerCase().includes(p))||(null==(n=t.origem)?void 0:n.toLowerCase().includes(p))||(null==(d=t.tipo)?void 0:d.toLowerCase().includes(p))||(null==(o=t.modelo)?void 0:o.toLowerCase().includes(p))||(null==(c=t.id)?void 0:c.toLowerCase().includes(p));return x&&m});return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Sistema de C\xe1lculos"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:null==p?void 0:p.email}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("admin"===h?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"admin"===h?"Admin":"Colaborador"})]}),(0,s.jsx)("button",{onClick:f,className:"text-sm text-gray-500 hover:text-red-600 transition-colors",children:"Sair"}),(0,s.jsx)(i(),{href:"/editor",className:"px-4 py-2 bg-slate-900 text-white rounded-md hover:bg-slate-800 transition-colors text-sm font-medium",children:"+ Novo C\xe1lculo"})]})]})}),(0,s.jsxs)("main",{className:"max-w-8xl mx-auto px-6 py-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("todos"===e?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>t("todos"),children:"Todos"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("aguardando"===e?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>t("aguardando"),children:"Aguardando"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("retornado"===e?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>t("retornado"),children:"admin"===h?"C\xe1lculos Enviados":"C\xe1lculos Retornados"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("fechado"===e?"bg-slate-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>t("fechado"),children:"Enviado/Outros"})]}),(0,s.jsx)("div",{className:"w-full lg:w-auto",children:(0,s.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Buscar por cliente, cidade, marca, c\xf3digo ou modelo...",className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent text-sm w-full lg:w-96"})})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Data"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Cliente"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Cidade"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Custo"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Marca"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Produto"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Modelo"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Qtd"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Origem"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Obs."}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Pre\xe7o Venda"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Andamento"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap sticky right-0 bg-gray-50 shadow-[-4px_0_6px_-1px_rgba(0,0,0,0.1)]",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===b.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:14,className:"px-6 py-12 text-center text-sm text-gray-400",children:0===c.length?"Carregando...":"Nenhum c\xe1lculo encontrado com os filtros aplicados"})}):b.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:e.data?(()=>{let[t,a,s]=e.data.split("-").map(Number);return new Date(t,a-1,s).toLocaleDateString("pt-BR")})():"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap max-w-[200px] truncate",children:e.cliente||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:e.cidade||"-"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap font-medium",children:["R$ ",(null==(t=e.custoProduto)?void 0:t.toFixed(2))||"0,00"]}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap",children:e.marca||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap font-mono",children:e.produto||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap max-w-[250px] truncate",children:e.modelo||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 whitespace-nowrap text-center",children:e.quantidade||0}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Importado"===e.origem?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.origem||"Nacional"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap font-bold flex justify-center items-center",children:e.observacoes?(0,s.jsx)("div",{className:"bg-yellow-300 h-5 aspect-square rounded-full flex justify-center items-center",children:(0,s.jsx)("span",{className:"text-xs text-red-600",children:"!"})}):""}),(0,s.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap font-bold",children:["R$ ","aguardando"!==e.statusFirebase&&(null==(a=e.precoVenda)?void 0:a.toFixed(2))||"-"]}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("enviado"===e.statusFirebase?"bg-green-100 text-green-800":"lucro calculado"===e.statusFirebase?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.statusFirebase||"aguardando"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm whitespace-nowrap sticky right-0 bg-white shadow-[-4px_0_6px_-1px_rgba(0,0,0,0.1)]",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i(),{href:"/editor?id=".concat(e.idFirebase),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Ver"}),(0,s.jsx)("span",{className:"text-gray-300",children:"|"}),(0,s.jsx)(i(),{href:"/editor?id=".concat(e.idFirebase,"&edit=true"),className:"text-slate-600 hover:text-slate-800 font-medium",children:"Editar"})]})})]},e.idFirebase)})})]})})})]})]})}}},e=>{e.O(0,[595,965,773,158,742,441,255,358],()=>e(e.s=4299)),_N_E=e.O()}]);